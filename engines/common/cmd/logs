#!/usr/bin/env bash
set -euo pipefail
# source "$(dirname "$0")/../lib.sh"
source "$DBLAB_ROOT/scripts/lib/engine-lib.sh"

( cd "${DBLAB_ROOT}/engines/${DBLAB_ENGINE}"
    svc="${1:-}"
    shift || true

    # Native compose arguments such as the -f option can be passed separated by "--"
    # e.g. db pg logs postgres -- -f --tail=100
    extra_args=()
    if [[ "${1:-}" == "--" ]]; then shift; extra_args=("$@"); fi

    if [[ -n "$svc" ]]; then
        compose -f compose.yaml logs "${extra_args[@]}" "$svc"
    else
        compose -f compose.yaml logs "${extra_args[@]}"
    fi
)

